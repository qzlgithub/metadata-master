<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.mingdong.mis.domain.mapper.ManagerInfoMapper">
    <resultMap id="BaseResultMap" type="ManagerInfo">
        <result column="manager_id" property="managerId" jdbcType="BIGINT" />
        <result column="name" property="name" jdbcType="VARCHAR" />
        <result column="phone" property="phone" jdbcType="VARCHAR" />
        <result column="username" property="username" jdbcType="VARCHAR" />
        <result column="role_id" property="roleId" jdbcType="BIGINT" />
        <result column="role_name" property="roleName" jdbcType="VARCHAR" />
        <result column="register_time" property="registerTime" jdbcType="TIMESTAMP" />
        <result column="enabled" property="enabled" jdbcType="TINYINT" />
    </resultMap>

    <select id="getListBy" resultMap="BaseResultMap">
        select m.`id` as manager_id, m.`name` as name, m.`phone` as phone, m.`username` as username, r.`id` as role_id,
        r.`name` as role_name, m.`create_time` as register_time, m.`enabled` as enabled from `user` m left join
        `role` r on m.`role_id` = r.`id`
        <where>
            <if test="roleId != null">m.`role_id` = #{roleId}</if>
            <if test="enabled != null">and m.`enabled` = #{enabled}</if>
        </where>
    </select>
</mapper>